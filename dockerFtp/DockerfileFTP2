# Dockerfile for vsftpd on CentOS
FROM centos:7

ENV FTP_HOME=/home/anonymous
RUN yum -y update; yum -y install which vsftpd net-tools vsftpd-sysvinit; yum clean all

COPY vsftpd.conf /etc/vsftpd/
COPY userlist /etc/vsftpd/ 

RUN useradd anonymous; usermod -aG wheel anonymous; mkdir $FTP_HOME/ftp_dir 
RUN chmod 655 /home/anonymous; chown -R anonymous: /home/anonymous; chmod 777 /home/anonymous/ftp_dir

EXPOSE 20 21 30000 31000

CMD ["/usr/sbin/vsftpd","-obackground=NO"]

